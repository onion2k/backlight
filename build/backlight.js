!function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var t={};r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="/",r(r.s=0)}([function(e,r,t){e.exports=t(1)},function(e,r,t){"use strict";function n(){c.clearRect(0,0,s.width,s.height),c.fillStyle="rgba(0,0,0,0)",c.beginPath(),c.rect(0,0,s.width,s.height),c.fill(),c.fillStyle="rgba(255,255,255,1)";let e=document.body.scrollTop,r=document.body.scrollTop+document.body.clientHeight;u.forEach(t=>{t.y+t.height>e&&t.y<r&&(c.beginPath(),c.rect(t.x,t.y-document.body.scrollTop,t.width,t.height),c.fill())}),f=i.createTexture(d,{src:c.canvas,crossOrigin:""})}function o(){v+=.01,i.resizeCanvasToDisplaySize(d.canvas),d.enable(d.BLEND),d.blendFunc(d.SRC_COLOR,d.ONE_MINUS_SRC_COLOR),d.useProgram(p.program),i.setBuffersAndAttributes(d,p,b),i.setUniforms(p,{exposure:1,decay:1,density:1,weight:.01,lightPositionOnScreen:[.5+.4*Math.sin(v),.5+.3*Math.cos(v)],u_resolution:[800,800],u_time:m+=.025,u_tex:f,u_matrix:y.identity()}),i.drawBufferInfo(d,b),requestAnimationFrame(o)}Object.defineProperty(r,"__esModule",{value:!0});var a=t(2),i=(t.n(a),t(3));t.n(i);console.log("Mapping screen elements");const u=[];let f;document.querySelectorAll(".backlight").forEach(e=>{let r=e.getBoundingClientRect();u.push({x:r.left,y:r.top,width:r.width,height:r.height})}),console.log("Converting to texture");const s=document.createElement("canvas");s.width=document.body.clientWidth,s.height=document.body.clientHeight;const c=s.getContext("2d");c.fillStyle="rgba(0,0,0,0)",c.strokeStyle="red",console.log("Passing to shader");const l=document.createElement("canvas");l.style.position="fixed",l.style.top="0",l.style.left="0",l.width=document.body.clientWidth,l.height=document.body.clientHeight,l.style["pointer-events"]="none",document.body.appendChild(l);let m=0,d=l.getContext("webgl",{premultipliedAlpha:!1});d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,!0);let y=i.m4,p=i.createProgramInfo(d,["\nattribute vec4 position;\nvarying vec2 v_texcoord;\nuniform mat4 u_matrix;\nvoid main() {\n    gl_Position = u_matrix * position;\n    v_texcoord = position.xy * .5 + .5;\n}\n","\n\nprecision mediump float;\n\nuniform float exposure;\nuniform float decay;\nuniform float density;\nuniform float weight;\nuniform vec2 lightPositionOnScreen;\nuniform sampler2D tex;\nvarying vec2 v_texcoord;\nconst int NUM_SAMPLES = 100;\n\nvoid main()\n{\n    vec2 deltaTextCoord = vec2( v_texcoord.st - lightPositionOnScreen.xy );\n    vec2 textCoo = v_texcoord.st;\n    deltaTextCoord *= 1.0 /  float(NUM_SAMPLES) * density;\n    float illuminationDecay = 1.0;\n\n    for(int i=0; i < NUM_SAMPLES ; i++)\n    {\n        textCoo -= deltaTextCoord;\n        vec4 sample = texture2D(tex, textCoo);\n        sample *= illuminationDecay * weight;\n        gl_FragColor += sample;\n        illuminationDecay *= decay;\n    }\n\n    gl_FragColor *= exposure;\n\n}\n"]),b=i.primitives.createXYQuadBufferInfo(d),v=0;document.addEventListener("scroll",n),n(),o()},function(e,r){},function(e,r,t){/*!
 * @license twgl.js 4.0.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
!function(r,t){e.exports=t()}(0,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var t={};return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=7)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=window.console&&window.console.error&&"function"==typeof window.console.error?window.console.error.bind(window.console):function(){},o=window.console&&window.console.warn&&"function"==typeof window.console.warn?window.console.warn.bind(window.console):function(){};r.copyExistingProperties=function(e,r){Object.keys(r).forEach(function(t){r.hasOwnProperty(t)&&e.hasOwnProperty(t)&&(r[t]=e[t])})},r.copyNamedProperties=function(e,r,t){e.forEach(function(e){var n=r[e];void 0!==n&&(t[e]=n)})},r.shallowCopy=function(e){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r},r.isWebGL1=function(e){return!e.texStorage2D},r.isWebGL2=function(e){return!!e.texStorage2D},r.error=n,r.warn=o},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=5120,o=5121,a=5122,i=5123,u=5124,f=5125,s=5126,c={},l=c;l[n]=Int8Array,l[o]=Uint8Array,l[a]=Int16Array,l[i]=Uint16Array,l[u]=Int32Array,l[f]=Uint32Array,l[s]=Float32Array,l[32819]=Uint16Array,l[32820]=Uint16Array,l[33635]=Uint16Array,l[5131]=Uint16Array,l[33640]=Uint32Array,l[35899]=Uint32Array,l[35902]=Uint32Array,l[36269]=Uint32Array,l[34042]=Uint32Array;var m=window.SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof window.SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};r.getGLTypeForTypedArray=function(e){if(e instanceof Int8Array)return n;if(e instanceof Uint8Array)return o;if(e instanceof Uint8ClampedArray)return o;if(e instanceof Int16Array)return a;if(e instanceof Uint16Array)return i;if(e instanceof Int32Array)return u;if(e instanceof Uint32Array)return f;if(e instanceof Float32Array)return s;throw"unsupported typed array type"},r.getGLTypeForTypedArrayType=function(e){if(e===Int8Array)return n;if(e===Uint8Array)return o;if(e===Uint8ClampedArray)return o;if(e===Int16Array)return a;if(e===Uint16Array)return i;if(e===Int32Array)return u;if(e===Uint32Array)return f;if(e===Float32Array)return s;throw"unsupported typed array type"},r.getTypedArrayTypeForGLType=function(e){var r=c[e];if(!r)throw"unknown gl type";return r},r.isArrayBuffer=m},function(e,r,t){"use strict";function n(e,r){return M[r].bindPoint}function o(e,r){return function(t){e.uniform1i(r,t)}}function a(e,r){return function(t){e.uniform1iv(r,t)}}function i(e,r){return function(t){e.uniform2iv(r,t)}}function u(e,r){return function(t){e.uniform3iv(r,t)}}function f(e,r){return function(t){e.uniform4iv(r,t)}}function s(e,r,t,o){var a=n(0,r);return C.isWebGL2(e)?function(r){var n=void 0,i=void 0;r instanceof WebGLTexture?(n=r,i=null):(n=r.texture,i=r.sampler),e.uniform1i(o,t),e.activeTexture(e.TEXTURE0+t),e.bindTexture(a,n),e.bindSampler(t,i)}:function(r){e.uniform1i(o,t),e.activeTexture(e.TEXTURE0+t),e.bindTexture(a,r)}}function c(e,r,t,o,a){for(var i=n(0,r),u=new Int32Array(a),f=0;f<a;++f)u[f]=t+f;return C.isWebGL2(e)?function(r){e.uniform1iv(o,u),r.forEach(function(r,n){e.activeTexture(e.TEXTURE0+u[n]);var o=void 0,a=void 0;r instanceof WebGLTexture?(o=r,a=null):(o=r.texture,a=r.sampler),e.bindSampler(t,a),e.bindTexture(i,o)})}:function(r){e.uniform1iv(o,u),r.forEach(function(r,t){e.activeTexture(e.TEXTURE0+u[t]),e.bindTexture(i,r)})}}function l(e,r){return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,t.numComponents||t.size,t.type||e.FLOAT,t.normalize||!1,t.stride||0,t.offset||0),void 0!==t.divisor&&e.vertexAttribDivisor(r,t.divisor)}}function m(e,r){return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribIPointer(r,t.numComponents||t.size,t.type||e.INT,t.stride||0,t.offset||0),void 0!==t.divisor&&e.vertexAttribDivisor(r,t.divisor)}}function d(e,r,t){var n=t.size,o=t.count;return function(t){e.bindBuffer(e.ARRAY_BUFFER,t.buffer);for(var a=t.size||t.numComponents||n,i=a/o,u=t.type||e.FLOAT,f=M[u].size*a,s=t.normalize||!1,c=t.offset||0,l=f/o,m=0;m<o;++m)e.enableVertexAttribArray(r+m),e.vertexAttribPointer(r+m,i,u,s,f,c+l*m),void 0!==t.divisor&&e.vertexAttribDivisor(r+m,t.divisor)}}function y(e,r,t,n){var o=n||I,a=e.createShader(t),i=0;D.test(r)&&(i=1,r=r.replace(D,"")),e.shaderSource(a,r),e.compileShader(a);if(!e.getShaderParameter(a,e.COMPILE_STATUS)){var u=e.getShaderInfoLog(a);return o(function(e,r){return r=r||0,++r,e.split("\n").map(function(e,t){return t+r+": "+e}).join("\n")}(r,i)+"\n*** Error compiling shader: "+u),e.deleteShader(a),null}return a}function p(e,r,t){var n=void 0;if("function"==typeof r&&(t=r,r=void 0),"function"==typeof e)t=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var o=e;t=o.errorCallback,e=o.attribLocations,n=o.transformFeedbackVaryings}var a={errorCallback:t||I,transformFeedbackVaryings:n};if(e){var i={};Array.isArray(e)?e.forEach(function(e,t){i[e]=r?r[t]:t}):i=e,a.attribLocations=i}return a}function b(e){return e.indexOf("frag")>=0?L.FRAGMENT_SHADER:e.indexOf("vert")>=0?L.VERTEX_SHADER:void 0}function v(e,r){r.forEach(function(r){e.deleteShader(r)})}function E(e,r,t,n,o){for(var a=p(t,n,o),i=[],u=[],f=0;f<r.length;++f){var s=r[f];if("string"==typeof s){var c=document.getElementById(s),l=c?c.text:s,m=e[N[f]];c&&c.type&&(m=b(c.type)||m),s=y(e,l,m,a.errorCallback),u.push(s)}s instanceof WebGLShader&&i.push(s)}if(i.length!==r.length)return a.errorCallback("not enough shaders for program"),v(e,u),null;var d=e.createProgram();i.forEach(function(r){e.attachShader(d,r)}),a.attribLocations&&Object.keys(a.attribLocations).forEach(function(r){e.bindAttribLocation(d,a.attribLocations[r],r)});var E=a.transformFeedbackVaryings;E&&(E.attribs&&(E=E.attribs),Array.isArray(E)||(E=Object.keys(E)),e.transformFeedbackVaryings(d,E,a.transformFeedbackMode||e.SEPARATE_ATTRIBS)),e.linkProgram(d);if(!e.getProgramParameter(d,e.LINK_STATUS)){var h=e.getProgramInfoLog(d);return a.errorCallback("Error in program linking:"+h),e.deleteProgram(d),v(e,u),null}return d}function h(e,r,t,n){var o="",a=document.getElementById(r);if(!a)throw"*** Error: unknown script element"+r;o=a.text;var i=t||b(a.type);if(!i)throw"*** Error: unknown shader type";return y(e,o,i,n)}function A(e,r,t,n,o){for(var a=p(t,n,o),i=[],u=0;u<r.length;++u){var f=y(e,r[u],e[N[u]],a.errorCallback);if(!f)return null;i.push(f)}return E(e,i,a)}function _(e,r){function t(r,t){var o=e.getUniformLocation(r,t.name),a=t.size>1&&"[0]"===t.name.substr(-3),i=t.type,u=M[i];if(!u)throw"unknown type: 0x"+i.toString(16);var f=void 0;if(u.bindPoint){var s=n;n+=t.size,f=a?u.arraySetter(e,i,s,o,t.size):u.setter(e,i,s,o,t.size)}else f=u.arraySetter&&a?u.arraySetter(e,o):u.setter(e,o);return f.location=o,f}for(var n=0,o={},a=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),i=0;i<a;++i){var u=e.getActiveUniform(r,i);if(!u)break;var f=u.name;"[0]"===f.substr(-3)&&(f=f.substr(0,f.length-3));var s=t(r,u);o[f]=s}return o}function T(e,r){for(var t={},n=e.getProgramParameter(r,e.TRANSFORM_FEEDBACK_VARYINGS),o=0;o<n;++o){var a=e.getTransformFeedbackVarying(r,o);t[a.name]={index:o,type:a.type,size:a.size}}return t}function x(e,r,t){r.transformFeedbackInfo&&(r=r.transformFeedbackInfo),t.attribs&&(t=t.attribs);for(var n in t){var o=r[n];if(o){var a=t[n];a.offset?e.bindBufferRange(e.TRANSFORM_FEEDBACK_BUFFER,o.index,a.buffer,a.offset,a.size):e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o.index,a.buffer)}}}function g(e,r){for(var t=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),n=[],o=[],a=0;a<t;++a){o.push(a),n.push({});var i=e.getActiveUniform(r,a);if(!i)break;n[a].name=i.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(t){var a=t[0],i=t[1];e.getActiveUniforms(r,o,e[a]).forEach(function(e,r){n[r][i]=e})});for(var u={},f=e.getProgramParameter(r,e.ACTIVE_UNIFORM_BLOCKS),s=0;s<f;++s){var c=e.getActiveUniformBlockName(r,s),l={index:s,usedByVertexShader:e.getActiveUniformBlockParameter(r,s,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(r,s,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(r,s,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(r,s,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};l.used=l.usedByVertexSahder||l.usedByFragmentShader,u[c]=l}return{blockSpecs:u,uniformData:n}}function F(e,r,t,n){var o=t.blockSpecs,a=t.uniformData,i=o[n];if(!i)return S("no uniform block object named:",n),{name:n,uniforms:{}};var u=new ArrayBuffer(i.size),f=e.createBuffer(),s=i.index;e.bindBuffer(e.UNIFORM_BUFFER,f),e.uniformBlockBinding(r,i.index,s);var c=n+".";z.test(c)&&(c=c.replace(z,"."));var l={};return i.uniformIndices.forEach(function(e){var r=a[e],t=M[r.type],n=t.Type,o=r.size*t.size,i=r.name;i.substr(0,c.length)===c&&(i=i.substr(c.length)),l[i]=new n(u,r.offset,o/n.BYTES_PER_ELEMENT)}),{name:n,array:u,asFloat:new Float32Array(u),buffer:f,uniforms:l}}function R(e,r,t){var n=(r.uniformBlockSpec||r).blockSpecs[t.name];if(n){var o=n.index;return e.bindBufferRange(e.UNIFORM_BUFFER,o,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function P(e,r){for(var t=e.uniformSetters||e,n=arguments.length,o=1;o<n;++o){var a=arguments[o];if(Array.isArray(a))for(var i=a.length,u=0;u<i;++u)P(t,a[u]);else for(var f in a){var s=t[f];s&&s(a[f])}}}function w(e,r){for(var t={},n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),o=0;o<n;++o){var a=e.getActiveAttrib(r,o);if(!a)break;var i=e.getAttribLocation(r,a.name),u=O[a.type],f=u.setter(e,i,u);f.location=i,t[a.name]=f}return t}function B(e,r){for(var t in r){var n=e[t];n&&n(r[t])}}function U(e,r){var t={program:r,uniformSetters:_(e,r),attribSetters:w(e,r)};return C.isWebGL2(e)&&(t.uniformBlockSpec=g(e,r),t.transformFeedbackInfo=T(e,r)),t}Object.defineProperty(r,"__esModule",{value:!0}),r.bindUniformBlock=r.setBlockUniforms=r.setUniformBlock=r.setUniforms=r.setBuffersAndAttributes=r.setAttributes=r.bindTransformFeedbackInfo=r.createTransformFeedbackInfo=r.createTransformFeedback=r.createUniformBlockInfo=r.createUniformBlockInfoFromProgram=r.createUniformBlockSpecFromProgram=r.createUniformSetters=r.createProgramInfoFromProgram=r.createProgramInfo=r.createProgramFromSources=r.createProgramFromScripts=r.createProgram=r.createAttributeSetters=void 0;var C=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(t(0)),I=C.error,S=C.warn,M={};M[5126]={Type:Float32Array,size:4,setter:function(e,r){return function(t){e.uniform1f(r,t)}},arraySetter:function(e,r){return function(t){e.uniform1fv(r,t)}}},M[35664]={Type:Float32Array,size:8,setter:function(e,r){return function(t){e.uniform2fv(r,t)}}},M[35665]={Type:Float32Array,size:12,setter:function(e,r){return function(t){e.uniform3fv(r,t)}}},M[35666]={Type:Float32Array,size:16,setter:function(e,r){return function(t){e.uniform4fv(r,t)}}},M[5124]={Type:Int32Array,size:4,setter:o,arraySetter:a},M[35667]={Type:Int32Array,size:8,setter:i},M[35668]={Type:Int32Array,size:12,setter:u},M[35669]={Type:Int32Array,size:16,setter:f},M[5125]={Type:Uint32Array,size:4,setter:function(e,r){return function(t){e.uniform1ui(r,t)}},arraySetter:function(e,r){return function(t){e.uniform1uiv(r,t)}}},M[36294]={Type:Uint32Array,size:8,setter:function(e,r){return function(t){e.uniform2uiv(r,t)}}},M[36295]={Type:Uint32Array,size:12,setter:function(e,r){return function(t){e.uniform3uiv(r,t)}}},M[36296]={Type:Uint32Array,size:16,setter:function(e,r){return function(t){e.uniform4uiv(r,t)}}},M[35670]={Type:Uint32Array,size:4,setter:o,arraySetter:a},M[35671]={Type:Uint32Array,size:8,setter:i},M[35672]={Type:Uint32Array,size:12,setter:u},M[35673]={Type:Uint32Array,size:16,setter:f},M[35674]={Type:Float32Array,size:16,setter:function(e,r){return function(t){e.uniformMatrix2fv(r,!1,t)}}},M[35675]={Type:Float32Array,size:36,setter:function(e,r){return function(t){e.uniformMatrix3fv(r,!1,t)}}},M[35676]={Type:Float32Array,size:64,setter:function(e,r){return function(t){e.uniformMatrix4fv(r,!1,t)}}},M[35685]={Type:Float32Array,size:24,setter:function(e,r){return function(t){e.uniformMatrix2x3fv(r,!1,t)}}},M[35686]={Type:Float32Array,size:32,setter:function(e,r){return function(t){e.uniformMatrix2x4fv(r,!1,t)}}},M[35687]={Type:Float32Array,size:24,setter:function(e,r){return function(t){e.uniformMatrix3x2fv(r,!1,t)}}},M[35688]={Type:Float32Array,size:48,setter:function(e,r){return function(t){e.uniformMatrix3x4fv(r,!1,t)}}},M[35689]={Type:Float32Array,size:32,setter:function(e,r){return function(t){e.uniformMatrix4x2fv(r,!1,t)}}},M[35690]={Type:Float32Array,size:48,setter:function(e,r){return function(t){e.uniformMatrix4x3fv(r,!1,t)}}},M[35678]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:3553},M[35680]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:34067},M[35679]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:32879},M[35682]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:3553},M[36289]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:35866},M[36292]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:35866},M[36293]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:34067},M[36298]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:3553},M[36299]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:32879},M[36300]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:34067},M[36303]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:35866},M[36306]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:3553},M[36307]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:32879},M[36308]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:34067},M[36311]={Type:null,size:0,setter:s,arraySetter:c,bindPoint:35866};var O={};O[5126]={size:4,setter:l},O[35664]={size:8,setter:l},O[35665]={size:12,setter:l},O[35666]={size:16,setter:l},O[5124]={size:4,setter:m},O[35667]={size:8,setter:m},O[35668]={size:12,setter:m},O[35669]={size:16,setter:m},O[5125]={size:4,setter:m},O[36294]={size:8,setter:m},O[36295]={size:12,setter:m},O[36296]={size:16,setter:m},O[35670]={size:4,setter:m},O[35671]={size:8,setter:m},O[35672]={size:12,setter:m},O[35673]={size:16,setter:m},O[35674]={size:4,setter:d,count:2},O[35675]={size:9,setter:d,count:3},O[35676]={size:16,setter:d,count:4};var L=void 0,D=/^[ \t]*\n/,N=["VERTEX_SHADER","FRAGMENT_SHADER"],z=/\[\d+\]\.$/;r.createAttributeSetters=w,r.createProgram=E,r.createProgramFromScripts=function(e,r,t,n,o){for(var a=p(t,n,o),i=[],u=0;u<r.length;++u){var f=h(e,r[u],e[N[u]],a.errorCallback);if(!f)return null;i.push(f)}return E(e,i,a)},r.createProgramFromSources=A,r.createProgramInfo=function(e,r,t,n,o){var a=p(t,n,o),i=!0;if(r=r.map(function(e){if(e.indexOf("\n")<0){var r=document.getElementById(e);r?e=r.text:(a.errorCallback("no element with id: "+e),i=!1)}return e}),!i)return null;var u=A(e,r,a);return u?U(e,u):null},r.createProgramInfoFromProgram=U,r.createUniformSetters=_,r.createUniformBlockSpecFromProgram=g,r.createUniformBlockInfoFromProgram=F,r.createUniformBlockInfo=function(e,r,t){return F(e,r.program,r.uniformBlockSpec,t)},r.createTransformFeedback=function(e,r,t){var n=e.createTransformFeedback();return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n),e.useProgram(r.program),x(e,r,t),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),function(e,r,t){r.transformFeedbackInfo&&(r=r.transformFeedbackInfo),t.attribs&&(t=t.attribs);for(var n in t){var o=r[n];o&&e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o.index,null)}}(e,r,t),n},r.createTransformFeedbackInfo=T,r.bindTransformFeedbackInfo=x,r.setAttributes=B,r.setBuffersAndAttributes=function(e,r,t){t.vertexArrayObject?e.bindVertexArray(t.vertexArrayObject):(B(r.attribSetters||r,t.attribs),t.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indices))},r.setUniforms=P,r.setUniformBlock=function(e,r,t){R(e,r,t)&&e.bufferData(e.UNIFORM_BUFFER,t.array,e.DYNAMIC_DRAW)},r.setBlockUniforms=function(e,r){var t=e.uniforms;for(var n in r){var o=t[n];if(o){var a=r[n];a.length?o.set(a):o[0]=a}}},r.bindUniformBlock=R},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Float32Array;r.add=function(e,r,t){return t=t||new n(3),t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},r.copy=function(e,r){return r=r||new n(3),r[0]=e[0],r[1]=e[1],r[2]=e[2],r},r.create=function(e,r,t){var o=new n(3);return e&&(o[0]=e),r&&(o[1]=r),t&&(o[2]=t),o},r.cross=function(e,r,t){t=t||new n(3);var o=e[2]*r[0]-e[0]*r[2],a=e[0]*r[1]-e[1]*r[0];return t[0]=e[1]*r[2]-e[2]*r[1],t[1]=o,t[2]=a,t},r.distance=function(e,r){var t=e[0]-r[0],n=e[1]-r[1],o=e[2]-r[2];return Math.sqrt(t*t+n*n+o*o)},r.distanceSq=function(e,r){var t=e[0]-r[0],n=e[1]-r[1],o=e[2]-r[2];return t*t+n*n+o*o},r.divide=function(e,r,t){return t=t||new n(3),t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},r.divScalar=function(e,r,t){return t=t||new n(3),t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r,t},r.dot=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]},r.lerp=function(e,r,t,o){return o=o||new n(3),o[0]=(1-t)*e[0]+t*r[0],o[1]=(1-t)*e[1]+t*r[1],o[2]=(1-t)*e[2]+t*r[2],o},r.length=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},r.lengthSq=function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},r.mulScalar=function(e,r,t){return t=t||new n(3),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},r.multiply=function(e,r,t){return t=t||new n(3),t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},r.negate=function(e,r){return r=r||new n(3),r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r},r.normalize=function(e,r){r=r||new n(3);var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],o=Math.sqrt(t);return o>1e-5?(r[0]=e[0]/o,r[1]=e[1]/o,r[2]=e[2]/o):(r[0]=0,r[1]=0,r[2]=0),r},r.setDefaultType=function(e){var r=n;return n=e,r},r.subtract=function(e,r,t){return t=t||new n(3),t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}},function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function o(e,r,t,n,o){e.bindBuffer(r,t),e.bufferData(r,n,o||e.STATIC_DRAW)}function a(e,r,t,n){if(r instanceof WebGLBuffer)return r;t=t||e.ARRAY_BUFFER;var a=e.createBuffer();return o(e,t,a,r,n),a}function i(e){return"indices"===e}function u(e){return e.length?e:e.data}function f(e,r){var t=void 0;if(t=E.test(e)?2:h.test(e)?4:3,r%t>0)throw"Can not guess numComponents for attribute '"+e+"'. Tried "+t+" but "+r+" values is not evenly divisible by "+t+". You should specify it.";return t}function s(e,r){return e.numComponents||e.size||f(r,u(e).length)}function c(e,r){if(p.isArrayBuffer(e))return e;if(p.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var t=e.type;return t||(t=i(r)?Uint16Array:Float32Array),new t(e.data)}function l(e,r){var t={};return Object.keys(r).forEach(function(n){if(!i(n)){var o=r[n],u=o.attrib||o.name||o.attribName||v.attribPrefix+n,l=void 0,m=void 0,d=void 0,y=void 0,b=void 0;if("number"==typeof o||"number"==typeof o.data){b=o.data||o;var E=o.type||Float32Array,h=b*E.BYTES_PER_ELEMENT;m=p.getGLTypeForTypedArrayType(E),d=void 0!==o.normalize?o.normalize:function(e){return e===Int8Array||e===Uint8Array}(E),y=o.numComponents||o.size||f(n,b),l=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,h,o.drawType||e.STATIC_DRAW)}else{var A=c(o,n);l=a(e,A,void 0,o.drawType),m=p.getGLTypeForTypedArray(A),d=void 0!==o.normalize?o.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(A),y=s(o,n),b=A.length}t[u]={buffer:l,numComponents:y,type:m,normalize:d,stride:o.stride||0,offset:o.offset||0,divisor:void 0===o.divisor?void 0:o.divisor,drawType:o.drawType}}}),e.bindBuffer(e.ARRAY_BUFFER,null),t}function m(e,r){var t={attribs:l(e,r)},n=r.indices;if(n){var o=c(n,"indices");t.indices=a(e,o,e.ELEMENT_ARRAY_BUFFER),t.numElements=o.length,t.elementType=p.getGLTypeForTypedArray(o)}else t.numElements=function(e,r){var t=void 0,n=void 0;for(n=0;n<A.length&&!((t=A[n])in r)&&!((t=v.attribPrefix+t)in r);++n);n===A.length&&(t=Object.keys(r)[0]);var o=r[t];e.bindBuffer(e.ARRAY_BUFFER,o.buffer);var a=e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE);e.bindBuffer(e.ARRAY_BUFFER,null);var i=a/function(e,r){return r===e.BYTE?1:r===e.UNSIGNED_BYTE?1:r===e.SHORT?2:r===e.UNSIGNED_SHORT?2:r===e.INT?4:r===e.UNSIGNED_INT?4:r===e.FLOAT?4:0}(e,o.type),u=o.numComponents||o.size,f=i/u;if(f%1!=0)throw"numComponents "+u+" not correct for length "+length;return f}(e,t.attribs);return t}function d(e,r,t){var n="indices"===t?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;return a(e,c(r,t),n)}function y(e,r){var t={};return Object.keys(r).forEach(function(n){t[n]=d(e,r[n],n)}),r.indices?(t.numElements=r.indices.length,t.elementType=p.getGLTypeForTypedArray(c(r.indices),"indices")):t.numElements=function(e){for(var r=void 0,t=0;t<A.length&&!((r=A[t])in e);++t);ii===A.length&&(r=Object.keys(e)[0]);var n=e[r],o=u(n).length,a=s(n,r),i=o/a;if(o%a>0)throw"numComponents "+a+" not correct for length "+o;return i}(r),t}Object.defineProperty(r,"__esModule",{value:!0}),r.getArray_=r.getNumComponents_=r.setAttributeDefaults_=r.setAttributePrefix=r.setAttribInfoBufferFromArray=r.createBufferInfoFromArrays=r.createBufferFromTypedArray=r.createBufferFromArray=r.createBuffersFromArrays=r.createAttribsFromArrays=void 0;var p=n(t(1)),b=n(t(0)),v={attribPrefix:""},E=/coord|texture/i,h=/color|colour/i,A=["position","positions","a_position"];r.createAttribsFromArrays=l,r.createBuffersFromArrays=y,r.createBufferFromArray=d,r.createBufferFromTypedArray=a,r.createBufferInfoFromArrays=m,r.setAttribInfoBufferFromArray=function(e,r,t,n){t=c(t),void 0!==n?(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.bufferSubData(e.ARRAY_BUFFER,n,t)):o(e,e.ARRAY_BUFFER,r.buffer,t,r.drawType)},r.setAttributePrefix=function(e){v.attribPrefix=e},r.setAttributeDefaults_=function(e){b.copyExistingProperties(e,v)},r.getNumComponents_=s,r.getArray_=u},function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function o(e,r){var t=k[e];if(!t)throw"unknown internal format";var n=t.bytesPerElementMap[r];if(void 0===n)throw"unknown internal format";return n}function a(e){var r=k[e];if(!r)throw"unknown internal format";return{format:r.textureFormat,type:Array.isArray(r.type)?r.type[0]:r.type}}function i(e){return 0==(e&e-1)}function u(e,r,t){return M(r)?C.getGLTypeForTypedArray(r):t||e.UNSIGNED_BYTE}function f(e,r,t,n,o){if(o%1!=0)throw"can't guess dimensions";if(t||n){if(n){if(!t&&(t=o/n)%1)throw"can't guess dimensions"}else if((n=o/t)%1)throw"can't guess dimensions"}else{var a=Math.sqrt(o/(r===e.TEXTURE_CUBE_MAP?6:1));a%1==0?(t=a,n=a):(t=o,n=1)}return{width:t,height:n}}function s(e){S.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function c(e,r){void 0!==r.colorspaceConversion&&(V.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.colorspaceConversion)),void 0!==r.premultiplyAlpha&&(V.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha)),void 0!==r.flipY&&(V.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY))}function l(e,r){void 0!==r.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,V.colorspaceConversion),void 0!==r.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),void 0!==r.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,V.flipY)}function m(e,r,t,n){n.minMag&&(t.call(e,r,e.TEXTURE_MIN_FILTER,n.minMag),t.call(e,r,e.TEXTURE_MAG_FILTER,n.minMag)),n.min&&t.call(e,r,e.TEXTURE_MIN_FILTER,n.min),n.mag&&t.call(e,r,e.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(t.call(e,r,e.TEXTURE_WRAP_S,n.wrap),t.call(e,r,e.TEXTURE_WRAP_T,n.wrap),(r===e.TEXTURE_3D||r instanceof j)&&t.call(e,r,e.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&t.call(e,r,e.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&t.call(e,r,e.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&t.call(e,r,e.TEXTURE_WRAP_T,n.wrapT),n.minLod&&t.call(e,r,e.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&t.call(e,r,e.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&t.call(e,r,e.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&t.call(e,r,e.TEXTURE_MAX_LEVEL,n.maxLevel)}function d(e,r,t){var n=t.target||e.TEXTURE_2D;e.bindTexture(n,r),m(e,n,e.texParameteri,t)}function y(e,r,t){m(e,r,e.samplerParameteri,t)}function p(e,r){var t=e.createSampler();return y(e,t,r),t}function b(e,r,t,n,o,a,u){t=t||S.textureOptions,a=a||e.RGBA,u=u||e.UNSIGNED_BYTE;var f=t.target||e.TEXTURE_2D;if(n=n||t.width,o=o||t.height,e.bindTexture(f,r),function(e,r,t,n){if(!I.isWebGL2(e))return i(r)&&i(t);var o=k[n];if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}(e,n,o,a))e.generateMipmap(f);else{var s=function(e){var r=k[e];if(!r)throw"unknown internal format";return r.textureFilterable}(a)?e.LINEAR:e.NEAREST;e.texParameteri(f,e.TEXTURE_MIN_FILTER,s),e.texParameteri(f,e.TEXTURE_MAG_FILTER,s),e.texParameteri(f,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(f,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}}function v(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function E(e,r){return(r=r||{}).cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function h(e,r){var t=E(e,r).map(function(e,r){return{face:e,ndx:r}});return t.sort(function(e,r){return e.face-r.face}),t}function A(e,r,t,n){var o=(n=n||S.textureOptions).target||e.TEXTURE_2D,i=n.level||0,u=t.width,f=t.height,s=n.internalFormat||n.format||e.RGBA,m=a(s),y=n.format||m.format,p=n.type||m.type;if(c(e,n),e.bindTexture(o,r),o===e.TEXTURE_CUBE_MAP){var E=t.width,A=t.height,_=void 0,T=void 0;if(E/6===A)_=A,T=[0,0,1,0,2,0,3,0,4,0,5,0];else if(A/6===E)_=E,T=[0,0,0,1,0,2,0,3,0,4,0,5];else if(E/3==A/2)_=E/3,T=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(E/2!=A/3)throw"can't figure out cube map from element: "+(t.src?t.src:t.nodeName);_=E/2,T=[0,0,1,0,0,1,1,1,0,2,1,2]}O.canvas.width=_,O.canvas.height=_,u=_,f=_,h(e,n).forEach(function(r){var n=T[2*r.ndx+0]*_,o=T[2*r.ndx+1]*_;O.drawImage(t,n,o,_,_,0,0,_,_),e.texImage2D(r.face,i,s,y,p,O.canvas)}),O.canvas.width=1,O.canvas.height=1}else if(o===e.TEXTURE_3D){var x=Math.min(t.width,t.height),g=Math.max(t.width,t.height),F=g/x;if(F%1!=0)throw"can not compute 3D dimensions of element";var R=t.width===g?1:0,P=t.height===g?1:0;e.texImage3D(o,i,s,x,x,x,0,y,p,null),O.canvas.width=x,O.canvas.height=x;for(var w=0;w<F;++w){var B=w*x*R,U=w*x*P,C=x,I=x,M=x,L=x;O.drawImage(t,B,U,C,I,0,0,M,L),e.texSubImage3D(o,i,0,0,w,x,x,1,y,p,O.canvas)}O.canvas.width=0,O.canvas.height=0,e.pixelStorei(e.UNPACK_SKIP_PIXELS,0)}else e.texImage2D(o,i,s,y,p,t);l(e,n),v(n)&&b(e,r,n,u,f,s,p),d(e,r,n)}function _(){}function T(e,r,t){function n(){i.removeEventListener("error",o),i.removeEventListener("load",a),i=null}function o(){var r="couldn't load image: "+e;I.error(r),t(r,i),n()}function a(){t(null,i),n()}t=t||_;var i=new Image;return void 0!==(r=void 0!==r?r:S.crossOrigin)&&(i.crossOrigin=r),i.addEventListener("error",o),i.addEventListener("load",a),i.src=e,i}function x(e,r,t){var n=(t=t||S.textureOptions).target||e.TEXTURE_2D;if(e.bindTexture(n,r),!1!==t.color){var o=function(e){return e=e||S.textureColor,M(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(t.color);if(n===e.TEXTURE_CUBE_MAP)for(var a=0;a<6;++a)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);else n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o)}}function g(e,r,t,n){n=n||_,t=t||S.textureOptions,x(e,r,t);return T((t=I.shallowCopy(t)).src,t.crossOrigin,function(o,a){o?n(o,r,a):(A(e,r,a,t),n(null,r,a))})}function F(e,r,t,n){n=n||_;var o=t.src;if(6!==o.length)throw"there must be 6 urls for a cubemap";var i=t.level||0,u=t.internalFormat||t.format||e.RGBA,f=a(u),s=t.format||f.format,m=t.type||e.UNSIGNED_BYTE,d=t.target||e.TEXTURE_2D;if(d!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";x(e,r,t),t=I.shallowCopy(t);var y=6,p=[],b=E(e,t),h=void 0;h=o.map(function(o,a){return T(o,t.crossOrigin,function(o){return function(a,f){--y,a?p.push(a):f.width!==f.height?p.push("cubemap face img is not a square: "+f.src):(c(e,t),e.bindTexture(d,r),5===y?E(e).forEach(function(r){e.texImage2D(r,i,u,s,m,f)}):e.texImage2D(o,i,u,s,m,f),l(e,t),v(t)&&e.generateMipmap(d)),0===y&&n(p.length?p:void 0,h,r)}}(b[a]))})}function R(e,r,t,n){n=n||_;var o=t.src,i=t.internalFormat||t.format||e.RGBA,u=a(i),f=t.format||u.format,s=t.type||e.UNSIGNED_BYTE,m=t.target||e.TEXTURE_2D_ARRAY;if(m!==e.TEXTURE_3D&&m!==e.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";x(e,r,t),t=I.shallowCopy(t);var d=o.length,y=[],p=void 0,b=t.level||0,E=t.width,h=t.height,A=o.length,g=!0;p=o.map(function(o,a){return T(o,t.crossOrigin,function(o){return function(a,u){if(--d,a)y.push(a);else{if(c(e,t),e.bindTexture(m,r),g){g=!1,E=t.width||u.width,h=t.height||u.height,e.texImage3D(m,b,i,E,h,A,0,f,s,null);for(var _=0;_<A;++_)e.texSubImage3D(m,b,0,0,_,E,h,1,f,s,u)}else{var T=u;u.width===E&&u.height===h||(T=O.canvas,O.canvas.width=E,O.canvas.height=h,O.drawImage(u,0,0,E,h)),e.texSubImage3D(m,b,0,0,o,E,h,1,f,s,T),T===O.canvas&&(O.canvas.width=0,O.canvas.height=0)}l(e,t),v(t)&&e.generateMipmap(m)}0===d&&n(y.length?y:void 0,p,r)}}(a))})}function P(e,r,t,n){var i=(n=n||S.textureOptions).target||e.TEXTURE_2D;e.bindTexture(i,r);var s=n.width,m=n.height,d=n.depth,y=n.level||0,p=n.internalFormat||n.format||e.RGBA,b=a(p),v=n.format||b.format,E=n.type||u(e,t,b.type);if(M(t))t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));else{var A=C.getTypedArrayTypeForGLType(E);t=new A(t)}var _=o(p,E),T=t.byteLength/_;if(T%1)throw"length wrong size for format: "+X(e,v);var x=void 0;if(i===e.TEXTURE_3D)if(s||m||d)!s||m&&d?!m||s&&d?(x=f(e,i,s,m,T/d),s=x.width,m=x.height):(x=f(e,i,s,d,T/m),s=x.width,d=x.height):(x=f(e,i,m,d,T/s),m=x.width,d=x.height);else{var g=Math.cbrt(T);if(g%1!=0)throw"can't guess cube size of array of numElements: "+T;s=g,m=g,d=g}else x=f(e,i,s,m,T),s=x.width,m=x.height;if(e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment||1),c(e,n),i===e.TEXTURE_CUBE_MAP){var F=T/6*(_/t.BYTES_PER_ELEMENT);h(e,n).forEach(function(r){var n=F*r.ndx,o=t.subarray(n,n+F);e.texImage2D(r.face,y,p,s,m,0,v,E,o)})}else i===e.TEXTURE_3D?e.texImage3D(i,y,p,s,m,d,0,v,E,t):e.texImage2D(i,y,p,s,m,0,v,E,t);return l(e,n),{width:s,height:m,depth:d,type:E}}function w(e,r,t){var n=t.target||e.TEXTURE_2D;e.bindTexture(n,r);var o=t.level||0,i=t.internalFormat||t.format||e.RGBA,u=a(i),f=t.format||u.format,s=t.type||u.type;if(c(e,t),n===e.TEXTURE_CUBE_MAP)for(var m=0;m<6;++m)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,o,i,t.width,t.height,0,f,s,null);else n===e.TEXTURE_3D?e.texImage3D(n,o,i,t.width,t.height,t.depth,0,f,s,null):e.texImage2D(n,o,i,t.width,t.height,0,f,s,null);l(e,t)}function B(e,r,t){t=t||_,r=r||S.textureOptions;var n=e.createTexture(),o=r.target||e.TEXTURE_2D,i=r.width||1,u=r.height||1,f=r.internalFormat||e.RGBA,s=a(f),c=r.type||s.type;e.bindTexture(o,n),o===e.TEXTURE_CUBE_MAP&&(e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var l=r.src;if(l)if("function"==typeof l&&(l=l(e,r)),"string"==typeof l)g(e,n,r,t);else if(M(l)||Array.isArray(l)&&("number"==typeof l[0]||Array.isArray(l[0])||M(l[0]))){var m=P(e,n,l,r);i=m.width,u=m.height,c=m.type}else if(Array.isArray(l)&&"string"==typeof l[0])o===e.TEXTURE_CUBE_MAP?F(e,n,r,t):R(e,n,r,t);else{if(!(l instanceof HTMLElement))throw"unsupported src type";A(e,n,l,r),i=l.width,u=l.height}else w(e,n,r);return v(r)&&b(e,n,r,i,u,f,c),d(e,n,r),n}function U(e,r,t){function n(){0===o&&setTimeout(function(){t(a.length?a:void 0,i,u)},0)}t=t||_;var o=0,a=[],i={},u={};return Object.keys(r).forEach(function(t){var f=r[t],s=void 0;(function(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]})(f.src)&&(s=function(e,r,i){u[t]=i,--o,e&&a.push(e),n()},++o),i[t]=B(e,f,s)}),n(),i}Object.defineProperty(r,"__esModule",{value:!0}),r.getBytesPerElementForInternalFormat=r.getNumComponentsForFormat=r.resizeTexture=r.createTextures=r.setDefaultTextureColor=r.setTextureParameters=r.setTextureFilteringForSize=r.setTextureFromElement=r.loadTextureFromUrl=r.setTextureFromArray=r.setEmptyTexture=r.createTexture=r.setSamplerParameters=r.createSamplers=r.createSampler=r.setTextureDefaults_=void 0;var C=n(t(1)),I=n(t(0)),S={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},M=C.isArrayBuffer,O=document.createElement("canvas").getContext("2d"),L=6407,D=33319,N={},z=N;z[6406]={numColorComponents:1},z[6409]={numColorComponents:1},z[6410]={numColorComponents:2},z[6407]={numColorComponents:3},z[6408]={numColorComponents:4},z[6403]={numColorComponents:1},z[36244]={numColorComponents:1},z[33319]={numColorComponents:2},z[33320]={numColorComponents:2},z[6407]={numColorComponents:3},z[36248]={numColorComponents:3},z[6408]={numColorComponents:4},z[36249]={numColorComponents:4},z[6402]={numColorComponents:1},z[34041]={numColorComponents:2};var k={},G=k;G[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},G[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},G[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]},G[6407]={textureFormat:L,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},G[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},G[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:1,type:5121},G[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:1,type:5120},G[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},G[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:4,type:5126},G[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5121},G[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5120},G[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5123},G[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5122},G[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},G[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5124},G[33323]={textureFormat:D,colorRenderable:!0,textureFilterable:!0,bytesPerElement:2,type:5121},G[36757]={textureFormat:D,colorRenderable:!1,textureFilterable:!0,bytesPerElement:2,type:5120},G[33327]={textureFormat:D,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},G[33328]={textureFormat:D,colorRenderable:!1,textureFilterable:!1,bytesPerElement:8,type:5126},G[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5121},G[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5120},G[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5123},G[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5122},G[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5125},G[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5124},G[32849]={textureFormat:L,colorRenderable:!0,textureFilterable:!0,bytesPerElement:3,type:5121},G[35905]={textureFormat:L,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5121},G[36194]={textureFormat:L,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},G[36758]={textureFormat:L,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5120},G[35898]={textureFormat:L,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},G[35901]={textureFormat:L,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},G[34843]={textureFormat:L,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},G[34837]={textureFormat:L,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5126},G[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5121},G[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5120},G[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5123},G[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5122},G[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5125},G[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5124},G[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},G[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},G[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:4,type:5120},G[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},G[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},G[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:33640},G[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},G[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:16,type:5126},G[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5121},G[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5120},G[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:33640},G[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5123},G[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5122},G[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5124},G[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5125},G[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},G[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},G[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5126},G[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:34042},G[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:36269},Object.keys(G).forEach(function(e){var r=G[e];if(r.bytesPerElementMap={},Array.isArray(r.bytesPerElement))r.bytesPerElement.forEach(function(e,t){var n=r.type[t];r.bytesPerElementMap[n]=e});else{var t=r.type;r.bytesPerElementMap[t]=r.bytesPerElement}});var X=function(){var e=void 0;return function(r,t){return function(r){if(!e){e={};for(var t in r)"number"==typeof r[t]&&(e[r[t]]=t)}}(r),e[t]||"0x"+t.toString(16)}}(),V={},j=window.WebGLSampler||function(){};r.setTextureDefaults_=function(e){I.copyExistingProperties(e,S),e.textureColor&&s(e.textureColor)},r.createSampler=p,r.createSamplers=function(e,r){var t={};return Object.keys(r).forEach(function(n){t[n]=p(e,r[n])}),t},r.setSamplerParameters=y,r.createTexture=B,r.setEmptyTexture=w,r.setTextureFromArray=P,r.loadTextureFromUrl=g,r.setTextureFromElement=A,r.setTextureFilteringForSize=b,r.setTextureParameters=d,r.setDefaultTextureColor=s,r.createTextures=U,r.resizeTexture=function(e,r,t,n,o){n=n||t.width,o=o||t.height;var i=t.target||e.TEXTURE_2D;e.bindTexture(i,r);var f=t.level||0,s=a(t.internalFormat||t.format||e.RGBA),c=t.format||s.format,l=void 0,m=t.src;if(l=m&&(M(m)||Array.isArray(m)&&"number"==typeof m[0])?t.type||u(e,m,s.type):t.type||s.type,i===e.TEXTURE_CUBE_MAP)for(var d=0;d<6;++d)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+d,f,c,n,o,0,c,l,null);else e.texImage2D(i,f,c,n,o,0,c,l,null)},r.getNumComponentsForFormat=function(e){var r=N[e];if(!r)throw"unknown format: "+e;return r.numColorComponents},r.getBytesPerElementForInternalFormat=o},function(e,r,t){"use strict";function n(e,r){return r=r||new u(16),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function o(e){return e=e||new u(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a(e,r){r=r||new u(16);var t=e[0],n=e[1],o=e[2],a=e[3],i=e[4],f=e[5],s=e[6],c=e[7],l=e[8],m=e[9],d=e[10],y=e[11],p=e[12],b=e[13],v=e[14],E=e[15],h=d*E,A=v*y,_=s*E,T=v*c,x=s*y,g=d*c,F=o*E,R=v*a,P=o*y,w=d*a,B=o*c,U=s*a,C=l*b,I=p*m,S=i*b,M=p*f,O=i*m,L=l*f,D=t*b,N=p*n,z=t*m,k=l*n,G=t*f,X=i*n,V=h*f+T*m+x*b-(A*f+_*m+g*b),j=A*n+F*m+w*b-(h*n+R*m+P*b),Y=_*n+R*f+B*b-(T*n+F*f+U*b),W=g*n+P*f+U*m-(x*n+w*f+B*m),K=1/(t*V+i*j+l*Y+p*W);return r[0]=K*V,r[1]=K*j,r[2]=K*Y,r[3]=K*W,r[4]=K*(A*i+_*l+g*p-(h*i+T*l+x*p)),r[5]=K*(h*t+R*l+P*p-(A*t+F*l+w*p)),r[6]=K*(T*t+F*i+U*p-(_*t+R*i+B*p)),r[7]=K*(x*t+w*i+B*l-(g*t+P*i+U*l)),r[8]=K*(C*c+M*y+O*E-(I*c+S*y+L*E)),r[9]=K*(I*a+D*y+k*E-(C*a+N*y+z*E)),r[10]=K*(S*a+N*c+G*E-(M*a+D*c+X*E)),r[11]=K*(L*a+z*c+X*y-(O*a+k*c+G*y)),r[12]=K*(S*d+L*v+I*s-(O*v+C*s+M*d)),r[13]=K*(z*v+C*o+N*d-(D*d+k*v+I*o)),r[14]=K*(D*s+X*v+M*o-(G*v+S*o+N*s)),r[15]=K*(G*d+O*o+k*s-(z*s+X*d+L*o)),r}Object.defineProperty(r,"__esModule",{value:!0}),r.transpose=r.translation=r.translate=r.transformPoint=r.transformNormal=r.transformDirection=r.setTranslation=r.setDefaultType=r.setAxis=r.scaling=r.scale=r.rotationZ=r.rotationY=r.rotationX=r.rotateZ=r.rotateY=r.rotateX=r.perspective=r.ortho=r.negate=r.multiply=r.lookAt=r.inverse=r.identity=r.getTranslation=r.getAxis=r.frustum=r.copy=r.axisRotation=r.axisRotate=void 0;var i=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(t(3)),u=Float32Array,f=i.create(),s=i.create(),c=i.create();r.axisRotate=function(e,r,t,n){n=n||new u(16);var o=r[0],a=r[1],i=r[2],f=Math.sqrt(o*o+a*a+i*i),s=(o/=f)*o,c=(a/=f)*a,l=(i/=f)*i,m=Math.cos(t),d=Math.sin(t),y=1-m,p=s+(1-s)*m,b=o*a*y+i*d,v=o*i*y-a*d,E=o*a*y-i*d,h=c+(1-c)*m,A=a*i*y+o*d,_=o*i*y+a*d,T=a*i*y-o*d,x=l+(1-l)*m,g=e[0],F=e[1],R=e[2],P=e[3],w=e[4],B=e[5],U=e[6],C=e[7],I=e[8],S=e[9],M=e[10],O=e[11];return n[0]=p*g+b*w+v*I,n[1]=p*F+b*B+v*S,n[2]=p*R+b*U+v*M,n[3]=p*P+b*C+v*O,n[4]=E*g+h*w+A*I,n[5]=E*F+h*B+A*S,n[6]=E*R+h*U+A*M,n[7]=E*P+h*C+A*O,n[8]=_*g+T*w+x*I,n[9]=_*F+T*B+x*S,n[10]=_*R+T*U+x*M,n[11]=_*P+T*C+x*O,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},r.axisRotation=function(e,r,t){t=t||new u(16);var n=e[0],o=e[1],a=e[2],i=Math.sqrt(n*n+o*o+a*a),f=(n/=i)*n,s=(o/=i)*o,c=(a/=i)*a,l=Math.cos(r),m=Math.sin(r),d=1-l;return t[0]=f+(1-f)*l,t[1]=n*o*d+a*m,t[2]=n*a*d-o*m,t[3]=0,t[4]=n*o*d-a*m,t[5]=s+(1-s)*l,t[6]=o*a*d+n*m,t[7]=0,t[8]=n*a*d+o*m,t[9]=o*a*d-n*m,t[10]=c+(1-c)*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.copy=n,r.frustum=function(e,r,t,n,o,a,i){var f=r-e,s=n-t,c=o-a;return(i=i||new u(16))[0]=2*o/f,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*o/s,i[6]=0,i[7]=0,i[8]=(e+r)/f,i[9]=(n+t)/s,i[10]=a/c,i[11]=-1,i[12]=0,i[13]=0,i[14]=o*a/c,i[15]=0,i},r.getAxis=function(e,r,t){var n=4*r;return(t=t||i.create())[0]=e[n+0],t[1]=e[n+1],t[2]=e[n+2],t},r.getTranslation=function(e,r){return r=r||i.create(),r[0]=e[12],r[1]=e[13],r[2]=e[14],r},r.identity=o,r.inverse=a,r.lookAt=function(e,r,t,n){n=n||new u(16);var o=f,a=s,l=c;return i.normalize(i.subtract(e,r,l),l),i.normalize(i.cross(t,l,o),o),i.normalize(i.cross(l,o,a),a),n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=0,n[4]=a[0],n[5]=a[1],n[6]=a[2],n[7]=0,n[8]=l[0],n[9]=l[1],n[10]=l[2],n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},r.multiply=function(e,r,t){t=t||new u(16);var n=e[0],o=e[1],a=e[2],i=e[3],f=e[4],s=e[5],c=e[6],l=e[7],m=e[8],d=e[9],y=e[10],p=e[11],b=e[12],v=e[13],E=e[14],h=e[15],A=r[0],_=r[1],T=r[2],x=r[3],g=r[4],F=r[5],R=r[6],P=r[7],w=r[8],B=r[9],U=r[10],C=r[11],I=r[12],S=r[13],M=r[14],O=r[15];return t[0]=n*A+f*_+m*T+b*x,t[1]=o*A+s*_+d*T+v*x,t[2]=a*A+c*_+y*T+E*x,t[3]=i*A+l*_+p*T+h*x,t[4]=n*g+f*F+m*R+b*P,t[5]=o*g+s*F+d*R+v*P,t[6]=a*g+c*F+y*R+E*P,t[7]=i*g+l*F+p*R+h*P,t[8]=n*w+f*B+m*U+b*C,t[9]=o*w+s*B+d*U+v*C,t[10]=a*w+c*B+y*U+E*C,t[11]=i*w+l*B+p*U+h*C,t[12]=n*I+f*S+m*M+b*O,t[13]=o*I+s*S+d*M+v*O,t[14]=a*I+c*S+y*M+E*O,t[15]=i*I+l*S+p*M+h*O,t},r.negate=function(e,r){return r=r||new u(16),r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r[4]=-e[4],r[5]=-e[5],r[6]=-e[6],r[7]=-e[7],r[8]=-e[8],r[9]=-e[9],r[10]=-e[10],r[11]=-e[11],r[12]=-e[12],r[13]=-e[13],r[14]=-e[14],r[15]=-e[15],r},r.ortho=function(e,r,t,n,o,a,i){return i=i||new u(16),i[0]=2/(r-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(n-t),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(o-a),i[11]=0,i[12]=(r+e)/(e-r),i[13]=(n+t)/(t-n),i[14]=(a+o)/(o-a),i[15]=1,i},r.perspective=function(e,r,t,n,o){o=o||new u(16);var a=Math.tan(.5*Math.PI-.5*e),i=1/(t-n);return o[0]=a/r,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(t+n)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=t*n*i*2,o[15]=0,o},r.rotateX=function(e,r,t){t=t||new u(16);var n=e[4],o=e[5],a=e[6],i=e[7],f=e[8],s=e[9],c=e[10],l=e[11],m=Math.cos(r),d=Math.sin(r);return t[4]=m*n+d*f,t[5]=m*o+d*s,t[6]=m*a+d*c,t[7]=m*i+d*l,t[8]=m*f-d*n,t[9]=m*s-d*o,t[10]=m*c-d*a,t[11]=m*l-d*i,e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t},r.rotateY=function(e,r,t){t=t||new u(16);var n=e[0],o=e[1],a=e[2],i=e[3],f=e[8],s=e[9],c=e[10],l=e[11],m=Math.cos(r),d=Math.sin(r);return t[0]=m*n-d*f,t[1]=m*o-d*s,t[2]=m*a-d*c,t[3]=m*i-d*l,t[8]=m*f+d*n,t[9]=m*s+d*o,t[10]=m*c+d*a,t[11]=m*l+d*i,e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t},r.rotateZ=function(e,r,t){t=t||new u(16);var n=e[0],o=e[1],a=e[2],i=e[3],f=e[4],s=e[5],c=e[6],l=e[7],m=Math.cos(r),d=Math.sin(r);return t[0]=m*n+d*f,t[1]=m*o+d*s,t[2]=m*a+d*c,t[3]=m*i+d*l,t[4]=m*f-d*n,t[5]=m*s-d*o,t[6]=m*c-d*a,t[7]=m*l-d*i,e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t},r.rotationX=function(e,r){r=r||new u(16);var t=Math.cos(e),n=Math.sin(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=t,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},r.rotationY=function(e,r){r=r||new u(16);var t=Math.cos(e),n=Math.sin(e);return r[0]=t,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=t,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},r.rotationZ=function(e,r){r=r||new u(16);var t=Math.cos(e),n=Math.sin(e);return r[0]=t,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=t,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},r.scale=function(e,r,t){t=t||new u(16);var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=n*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=o*e[6],t[7]=o*e[7],t[8]=a*e[8],t[9]=a*e[9],t[10]=a*e[10],t[11]=a*e[11],e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t},r.scaling=function(e,r){return r=r||new u(16),r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},r.setAxis=function(e,r,t,o){o!==e&&(o=n(e,o));var a=4*t;return o[a+0]=r[0],o[a+1]=r[1],o[a+2]=r[2],o},r.setDefaultType=function(e){var r=u;return u=e,r},r.setTranslation=function(e,r,t){return t=t||o(),e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},r.transformDirection=function(e,r,t){t=t||i.create();var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0]+o*e[4]+a*e[8],t[1]=n*e[1]+o*e[5]+a*e[9],t[2]=n*e[2]+o*e[6]+a*e[10],t},r.transformNormal=function(e,r,t){t=t||i.create();var n=a(e),o=r[0],u=r[1],f=r[2];return t[0]=o*n[0]+u*n[1]+f*n[2],t[1]=o*n[4]+u*n[5]+f*n[6],t[2]=o*n[8]+u*n[9]+f*n[10],t},r.transformPoint=function(e,r,t){t=t||i.create();var n=r[0],o=r[1],a=r[2],u=n*e[3]+o*e[7]+a*e[11]+e[15];return t[0]=(n*e[0]+o*e[4]+a*e[8]+e[12])/u,t[1]=(n*e[1]+o*e[5]+a*e[9]+e[13])/u,t[2]=(n*e[2]+o*e[6]+a*e[10]+e[14])/u,t},r.translate=function(e,r,t){t=t||new u(16);var n=r[0],o=r[1],a=r[2],i=e[0],f=e[1],s=e[2],c=e[3],l=e[4],m=e[5],d=e[6],y=e[7],p=e[8],b=e[9],v=e[10],E=e[11],h=e[12],A=e[13],_=e[14],T=e[15];return e!==t&&(t[0]=i,t[1]=f,t[2]=s,t[3]=c,t[4]=l,t[5]=m,t[6]=d,t[7]=y,t[8]=p,t[9]=b,t[10]=v,t[11]=E),t[12]=i*n+l*o+p*a+h,t[13]=f*n+m*o+b*a+A,t[14]=s*n+d*o+v*a+_,t[15]=c*n+y*o+E*a+T,t},r.translation=function(e,r){return r=r||new u(16),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r},r.transpose=function(e,r){if((r=r||new u(16))===e){var t=void 0;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,r}var n=e[0],o=e[1],a=e[2],i=e[3],f=e[4],s=e[5],c=e[6],l=e[7],m=e[8],d=e[9],y=e[10],p=e[11],b=e[12],v=e[13],E=e[14],h=e[15];return r[0]=n,r[1]=f,r[2]=m,r[3]=b,r[4]=o,r[5]=s,r[6]=d,r[7]=v,r[8]=a,r[9]=c,r[10]=y,r[11]=E,r[12]=i,r[13]=l,r[14]=p,r[15]=h,r}},function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}Object.defineProperty(r,"__esModule",{value:!0}),r.primitives=r.v3=r.m4=void 0;var o=t(8);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=n(t(6)),i=n(t(3)),u=n(t(12));r.m4=a,r.v3=i,r.primitives=u},function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function o(e,r){var t=e.getExtension(r);if(t){var n=h.exec(r)[1],o="_"+n;for(var a in t){var i=t[a],u="function"==typeof i,f=u?n:o,s=a;a.endsWith(f)&&(s=a.substring(0,a.length-f.length)),void 0!==e[s]?u||e[s]===i||console.warn(s,e[s],i,a):e[s]=u?function(e){return function(){return e.apply(t,arguments)}}(i):i}}return t}function a(e){for(var r=0;r<A.length;++r)o(e,A[r])}function i(e,r){return function(e,r){for(var t=["webgl","experimental-webgl"],n=null,o=0;o<t.length;++o)if(n=e.getContext(t[o],r)){E.addExtensionsToContext&&a(n);break}return n}(e,r)}function u(e,r){return function(e,r){for(var t=["webgl2","webgl","experimental-webgl"],n=null,o=0;o<t.length;++o)if(n=e.getContext(t[o],r)){E.addExtensionsToContext&&a(n);break}return n}(e,r)}Object.defineProperty(r,"__esModule",{value:!0}),r.setDefaults=r.resizeCanvasToDisplaySize=r.isWebGL2=r.isWebGL1=r.getWebGLContext=r.getContext=r.addExtensionsToContext=void 0;var f=t(4);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return f[e]}})});var s=t(9);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})});var c=t(10);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}})});var l=t(2);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}})});var m=t(5);Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return m[e]}})});var d=t(1);Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return d[e]}})});var y=t(11);Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return y[e]}})});var p=n(f),b=n(m),v=n(t(0)),E={addExtensionsToContext:!0},h=/^(.*?)_/,A=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","WEBGL_draw_buffers"],_=v.isWebGL1,T=v.isWebGL2;r.addExtensionsToContext=a,r.getContext=u,r.getWebGLContext=i,r.isWebGL1=_,r.isWebGL2=T,r.resizeCanvasToDisplaySize=function(e,r){r=r||1,r=Math.max(0,r);var t=e.clientWidth*r|0,n=e.clientHeight*r|0;return(e.width!==t||e.height!==n)&&(e.width=t,e.height=n,!0)},r.setDefaults=function(e){v.copyExistingProperties(e,E),p.setAttributeDefaults_(e),b.setTextureDefaults_(e)}},function(e,r,t){"use strict";function n(e,r,t,n,o,a){t=void 0===t?e.TRIANGLES:t;var i=r.indices,u=r.elementType,f=void 0===n?r.numElements:n;o=void 0===o?0:o,u||i?void 0!==a?e.drawElementsInstanced(t,f,void 0===u?e.UNSIGNED_SHORT:r.elementType,o,a):e.drawElements(t,f,void 0===u?e.UNSIGNED_SHORT:r.elementType,o):void 0!==a?e.drawArraysInstanced(t,o,f,a):e.drawArrays(t,o,f)}Object.defineProperty(r,"__esModule",{value:!0}),r.drawObjectList=r.drawBufferInfo=void 0;var o=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(t(2));r.drawBufferInfo=n,r.drawObjectList=function(e,r){var t=null,a=null;r.forEach(function(r){if(!1!==r.active){var i=r.programInfo,u=r.vertexArrayInfo||r.bufferInfo,f=!1,s=void 0===r.type?e.TRIANGLES:r.type;i!==t&&(t=i,e.useProgram(i.program),f=!0),(f||u!==a)&&(a&&a.vertexArrayObject&&!u.vertexArrayObject&&e.bindVertexArray(null),a=u,o.setBuffersAndAttributes(e,i,u)),o.setUniforms(i,r.uniforms),n(e,u,s,r.count,r.offset,r.instanceCount)}}),a.vertexArrayObject&&e.bindVertexArray(null)}},function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function o(e,r,t,n){var o=e.FRAMEBUFFER,l=e.createFramebuffer();e.bindFramebuffer(o,l),t=t||e.drawingBufferWidth,n=n||e.drawingBufferHeight;var m=0,d={framebuffer:l,attachments:[],width:t,height:n};return(r=r||f).forEach(function(r){var f=r.attachment,l=r.format,y=function(e){return s[e]}(l);if(y||(y=u+m++),!f)if(function(e){return c[e]}(l))f=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,f),e.renderbufferStorage(e.RENDERBUFFER,l,t,n);else{var p=i.shallowCopy(r);p.width=t,p.height=n,void 0===p.auto&&(p.auto=!1,p.min=p.min||p.minMag||e.LINEAR,p.mag=p.mag||p.minMag||e.LINEAR,p.wrapS=p.wrapS||p.wrap||e.CLAMP_TO_EDGE,p.wrapT=p.wrapT||p.wrap||e.CLAMP_TO_EDGE),f=a.createTexture(e,p)}if(f instanceof WebGLRenderbuffer)e.framebufferRenderbuffer(o,y,e.RENDERBUFFER,f);else{if(!(f instanceof WebGLTexture))throw"unknown attachment type";e.framebufferTexture2D(o,y,r.texTarget||e.TEXTURE_2D,f,r.level||0)}d.attachments.push(f)}),d}Object.defineProperty(r,"__esModule",{value:!0}),r.resizeFramebufferInfo=r.createFramebufferInfo=r.bindFramebufferInfo=void 0;var a=n(t(5)),i=n(t(0)),u=36064,f=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],s={};s[34041]=33306,s[6401]=36128,s[36168]=36128,s[6402]=36096,s[33189]=36096;var c={};c[32854]=!0,c[32855]=!0,c[36194]=!0,c[34041]=!0,c[33189]=!0,c[6401]=!0,c[36168]=!0,r.bindFramebufferInfo=function(e,r,t){t=t||e.FRAMEBUFFER,r?(e.bindFramebuffer(t,r.framebuffer),e.viewport(0,0,r.width,r.height)):(e.bindFramebuffer(t,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))},r.createFramebufferInfo=o,r.resizeFramebufferInfo=function(e,r,t,n,o){n=n||e.drawingBufferWidth,o=o||e.drawingBufferHeight,r.width=n,r.height=o,(t=t||f).forEach(function(t,i){var u=r.attachments[i],f=t.format;if(u instanceof WebGLRenderbuffer)e.bindRenderbuffer(e.RENDERBUFFER,u),e.renderbufferStorage(e.RENDERBUFFER,f,n,o);else{if(!(u instanceof WebGLTexture))throw"unknown attachment type";a.resizeTexture(e,u,t,n,o)}})}},function(e,r,t){"use strict";function n(e,r,t,n){var a=e.createVertexArray();return e.bindVertexArray(a),o.setAttributes(r,t),n&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bindVertexArray(null),a}Object.defineProperty(r,"__esModule",{value:!0}),r.createVAOFromBufferInfo=r.createVAOAndSetAttributes=r.createVertexArrayInfo=void 0;var o=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(t(2));r.createVertexArrayInfo=function(e,r,t){var n=e.createVertexArray();return e.bindVertexArray(n),r.length||(r=[r]),r.forEach(function(r){o.setBuffersAndAttributes(e,r,t)}),e.bindVertexArray(null),{numElements:t.numElements,elementType:t.elementType,vertexArrayObject:n}},r.createVAOAndSetAttributes=n,r.createVAOFromBufferInfo=function(e,r,t){return n(e,r.attribSetters||r,t.attribs,t.indices)}},function(e,r,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function o(e,r){var t=0;return e.push=function(){for(var r=0;r<arguments.length;++r){var n=arguments[r];if(n instanceof Array||I.isArrayBuffer(n))for(var o=0;o<n.length;++o)e[t++]=n[o];else e[t++]=n}},e.reset=function(e){t=e||0},e.numComponents=r,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function a(e,r,t){return o(new(t||Float32Array)(e*r),e)}function i(e){return"indices"!==e}function u(e,r,t){for(var n=e.length,o=new Float32Array(3),a=0;a<n;a+=3)t(r,[e[a],e[a+1],e[a+2]],o),e[a]=o[0],e[a+1]=o[1],e[a+2]=o[2]}function f(e,r,t){t=t||M.create();var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0]+o*e[1]+a*e[2],t[1]=n*e[4]+o*e[5]+a*e[6],t[2]=n*e[8]+o*e[9]+a*e[10],t}function s(e,r){return u(e,r,S.transformDirection),e}function c(e,r){return u(e,S.inverse(r),f),e}function l(e,r){return u(e,r,S.transformPoint),e}function m(e,r){return Object.keys(e).forEach(function(t){var n=e[t];t.indexOf("pos")>=0?l(n,r):t.indexOf("tan")>=0||t.indexOf("binorm")>=0?s(n,r):t.indexOf("norm")>=0&&c(n,r)}),e}function d(e,r,t){return e=e||2,r=r||0,t=t||0,e*=.5,{position:{numComponents:2,data:[r+-1*e,t+-1*e,r+1*e,t+-1*e,r+-1*e,t+1*e,r+1*e,t+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function y(e,r,t,n,o){e=e||1,r=r||1,t=t||1,n=n||1,o=o||S.identity();for(var i=(t+1)*(n+1),u=a(3,i),f=a(3,i),s=a(2,i),c=0;c<=n;c++)for(var l=0;l<=t;l++){var d=l/t,y=c/n;u.push(e*d-.5*e,0,r*y-.5*r),f.push(0,1,0),s.push(d,y)}for(var p=t+1,b=a(3,t*n*2,Uint16Array),v=0;v<n;v++)for(var E=0;E<t;E++)b.push((v+0)*p+E,(v+1)*p+E,(v+0)*p+E+1),b.push((v+1)*p+E,(v+1)*p+E+1,(v+0)*p+E+1);return m({position:u,normal:f,texcoord:s,indices:b},o)}function p(e,r,t,n,o,i,u){if(r<=0||t<=0)throw Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,o=o||Math.PI,i=i||0;for(var f=o-n,s=(u=u||2*Math.PI)-i,c=(r+1)*(t+1),l=a(3,c),m=a(3,c),d=a(2,c),y=0;y<=t;y++)for(var p=0;p<=r;p++){var b=p/r,v=y/t,E=s*b,h=f*v,A=Math.sin(E),_=Math.cos(E),T=Math.sin(h),x=_*T,g=Math.cos(h),F=A*T;l.push(e*x,e*g,e*F),m.push(x,g,F),d.push(1-b,v)}for(var R=r+1,P=a(3,r*t*2,Uint16Array),w=0;w<r;w++)for(var B=0;B<t;B++)P.push((B+0)*R+w,(B+0)*R+w+1,(B+1)*R+w),P.push((B+1)*R+w,(B+0)*R+w+1,(B+1)*R+w+1);return{position:l,normal:m,texcoord:d,indices:P}}function b(e){for(var r=(e=e||1)/2,t=[[-r,-r,-r],[+r,-r,-r],[-r,+r,-r],[+r,+r,-r],[-r,-r,+r],[+r,-r,+r],[-r,+r,+r],[+r,+r,+r]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],i=a(3,24),u=a(3,24),f=a(2,24),s=a(3,12,Uint16Array),c=0;c<6;++c){for(var l=D[c],m=0;m<4;++m){var d=t[l[m]],y=n[c],p=o[m];i.push(d),u.push(y),f.push(p)}var b=4*c;s.push(b+0,b+1,b+2),s.push(b+0,b+2,b+3)}return{position:i,normal:u,texcoord:f,indices:s}}function v(e,r,t,n,o,i,u){if(n<3)throw Error("radialSubdivisions must be 3 or greater");if(o<1)throw Error("verticalSubdivisions must be 1 or greater");for(var f=void 0===i||i,s=void 0===u||u,c=(f?2:0)+(s?2:0),l=(n+1)*(o+1+c),m=a(3,l),d=a(3,l),y=a(2,l),p=a(3,n*(o+c)*2,Uint16Array),b=n+1,v=Math.atan2(e-r,t),E=Math.cos(v),h=Math.sin(v),A=o+(s?2:0),_=f?-2:0;_<=A;++_){var T=_/o,x=t*T,g=void 0;_<0?(x=0,T=1,g=e):_>o?(x=t,T=1,g=r):g=e+_/o*(r-e),-2!==_&&_!==o+2||(g=0,T=0),x-=t/2;for(var F=0;F<b;++F){var R=Math.sin(F*Math.PI*2/n),P=Math.cos(F*Math.PI*2/n);m.push(R*g,x,P*g),d.push(_<0||_>o?0:R*E,_<0?-1:_>o?1:h,_<0||_>o?0:P*E),y.push(F/n,1-T)}}for(var w=0;w<o+c;++w)for(var B=0;B<n;++B)p.push(b*(w+0)+0+B,b*(w+0)+1+B,b*(w+1)+1+B),p.push(b*(w+0)+0+B,b*(w+1)+1+B,b*(w+1)+0+B);return{position:m,normal:d,texcoord:y,indices:p}}function E(e,r){r=r||[];for(var t=[],n=0;n<e.length;n+=4){var o=e[n],a=e.slice(n+1,n+4);a.push.apply(a,r);for(var i=0;i<o;++i)t.push.apply(t,a)}return t}function h(){var e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],r=E([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),t=E([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,o={position:a(3,n),texcoord:a(2,n),normal:a(3,n),color:a(4,n,Uint8Array),indices:a(3,n/3,Uint16Array)};o.position.push(e),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(r),o.color.push(t);for(var i=0;i<n;++i)o.indices.push(i);return o}function A(e,r,t,n,o,i,u){function f(e,r,t){return e+(r-e)*t}function s(r,t,a,u,s,c){for(var d=0;d<=o;d++){var v=t/(l-1),E=d/o,h=2*(v-.5),A=(i+E*m)*Math.PI,_=Math.sin(A),T=Math.cos(A),x=f(e,r,_),g=h*n,F=T*e,R=_*x;y.push(g,F,R);var P=M.add(M.multiply([0,_,T],a),u);p.push(P),b.push(v*s+c,E)}}function c(e,r){for(var t=0;t<o;++t)h.push(e+t+0,e+t+1,r+t+0),h.push(e+t+1,r+t+1,r+t+0)}if(o<=0)throw Error("subdivisionDown must be > 0");i=i||0;for(var l=2,m=(u=u||1)-i,d=2*(o+1)*(2+l),y=a(3,d),p=a(3,d),b=a(2,d),v=0;v<l;v++){var E=2*(v/(l-1)-.5);s(r,v,[1,1,1],[0,0,0],1,0),s(r,v,[0,0,0],[E,0,0],0,0),s(t,v,[1,1,1],[0,0,0],1,0),s(t,v,[0,0,0],[E,0,0],0,1)}var h=a(3,2*o*(2+l),Uint16Array),A=o+1;return c(0*A,4*A),c(5*A,7*A),c(6*A,2*A),c(3*A,1*A),{position:y,normal:p,texcoord:b,indices:h}}function _(e,r,t,n,o,a){return v(e,e,r,t,n,o,a)}function T(e,r,t,n,o,i){if(t<3)throw Error("radialSubdivisions must be 3 or greater");if(n<3)throw Error("verticalSubdivisions must be 3 or greater");o=o||0;for(var u=(i=i||2*Math.PI)-o,f=t+1,s=n+1,c=f*s,l=a(3,c),m=a(3,c),d=a(2,c),y=a(3,t*n*2,Uint16Array),p=0;p<s;++p)for(var b=p/n,v=b*Math.PI*2,E=Math.sin(v),h=e+E*r,A=Math.cos(v),_=A*r,T=0;T<f;++T){var x=T/t,g=o+x*u,F=Math.sin(g),R=Math.cos(g),P=F*h,w=R*h,B=F*E,U=R*E;l.push(P,_,w),m.push(B,A,U),d.push(x,1-b)}for(var C=0;C<n;++C)for(var I=0;I<t;++I){var S=1+I,M=1+C;y.push(f*C+I,f*M+I,f*C+S),y.push(f*M+I,f*M+S,f*C+S)}return{position:l,normal:m,texcoord:d,indices:y}}function x(e,r,t,n,o){if(r<3)throw Error("divisions must be at least 3");t=t||1,o=o||1,n=n||0;for(var i=(r+1)*(t+1),u=a(3,i),f=a(3,i),s=a(2,i),c=a(3,t*r*2,Uint16Array),l=0,m=e-n,d=r+1,y=0;y<=t;++y){for(var p=n+m*Math.pow(y/t,o),b=0;b<=r;++b){var v=2*Math.PI*b/r,E=p*Math.cos(v),h=p*Math.sin(v);if(u.push(E,0,h),f.push(0,1,0),s.push(1-b/r,y/t),y>0&&b!==r){var A=l+(b+1),_=l+b,T=l+b-d,x=l+(b+1)-d;c.push(A,_,T),c.push(A,T,x)}}l+=r+1}return{position:u,normal:f,texcoord:s,indices:c}}function g(e,r){r=r||{};var t=e.position.numElements,n=a(4,t,Uint8Array),o=r.rand||function(e,r){return r<3?function(e){return Math.random()*e|0}(256):255};if(e.color=n,e.indices)for(var i=0;i<t;++i)n.push(o(i,0),o(i,1),o(i,2),o(i,3));else for(var u=r.vertsPerColor||3,f=t/u,s=0;s<f;++s)for(var c=[o(s,0),o(s,1),o(s,2),o(s,3)],l=0;l<u;++l)n.push(c);return e}function F(e){return function(r){var t=e.apply(this,Array.prototype.slice.call(arguments,1));return U.createBuffersFromArrays(r,t)}}function R(e){return function(r){var t=e.apply(null,Array.prototype.slice.call(arguments,1));return U.createBufferInfoFromArrays(r,t)}}function P(e,r,t,n){n=n||0;for(var o=e.length,a=0;a<o;++a)r[t+a]=e[a]+n}function w(e,r){var t=O(e),n=new t.constructor(r),a=n;return t.numComponents&&t.numElements&&o(n,t.numComponents),e.data&&(a={data:n},C.copyNamedProperties(N,e,a)),a}function B(e){for(var r={},t=void 0,n=function(n){var o=e[n];Object.keys(o).forEach(function(e){r[e]||(r[e]=[]),t||"indices"===e||(t=e);var n=o[e],a=L(n,e),i=O(n).length/a;r[e].push(i)})},o=0;o<e.length;++o)n(o);var a=r[t],i={};return Object.keys(r).forEach(function(r){var t=function(r){for(var t=0,n=void 0,o=0;o<e.length;++o){var a=e[o][r];t+=O(a).length,n&&!a.data||(n=a)}return{length:t,spec:n}}(r),n=w(t.spec,t.length);!function(r,t,n){for(var o=0,a=0,i=0;i<e.length;++i){var u=e[i][r],f=O(u);"indices"===r?(P(f,n,a,o),o+=t[i]):P(f,n,a),a+=f.length}}(r,a,O(n)),i[r]=n}),i}Object.defineProperty(r,"__esModule",{value:!0}),r.duplicateVertices=r.concatVertices=r.reorientVertices=r.reorientPositions=r.reorientNormals=r.reorientDirections=r.makeRandomVertexColors=r.flattenNormals=r.deindexVertices=r.createDiscVertices=r.createDiscBuffers=r.createDiscBufferInfo=r.createTorusVertices=r.createTorusBuffers=r.createTorusBufferInfo=r.createCylinderVertices=r.createCylinderBuffers=r.createCylinderBufferInfo=r.createCresentVertices=r.createCresentBuffers=r.createCresentBufferInfo=r.createXYQuadVertices=r.createXYQuadBuffers=r.createXYQuadBufferInfo=r.createTruncatedConeVertices=r.createTruncatedConeBuffers=r.createTruncatedConeBufferInfo=r.createSphereVertices=r.createSphereBuffers=r.createSphereBufferInfo=r.createPlaneVertices=r.createPlaneBuffers=r.createPlaneBufferInfo=r.createCubeVertices=r.createCubeBuffers=r.createCubeBufferInfo=r.createAugmentedTypedArray=r.create3DFVertices=r.create3DFBuffers=r.create3DFBufferInfo=void 0;var U=n(t(4)),C=n(t(0)),I=n(t(1)),S=n(t(6)),M=n(t(3)),O=U.getArray_,L=U.getNumComponents_,D=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]],N=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"],z=R(h),k=F(h),G=R(b),X=F(b),V=R(y),j=F(y),Y=R(p),W=F(p),K=R(v),H=F(v),q=R(d),Z=F(d),Q=R(A),$=F(A),J=R(_),ee=F(_),re=R(T),te=F(T),ne=R(x),oe=F(x);r.create3DFBufferInfo=z,r.create3DFBuffers=k,r.create3DFVertices=h,r.createAugmentedTypedArray=a,r.createCubeBufferInfo=G,r.createCubeBuffers=X,r.createCubeVertices=b,r.createPlaneBufferInfo=V,r.createPlaneBuffers=j,r.createPlaneVertices=y,r.createSphereBufferInfo=Y,r.createSphereBuffers=W,r.createSphereVertices=p,r.createTruncatedConeBufferInfo=K,r.createTruncatedConeBuffers=H,r.createTruncatedConeVertices=v,r.createXYQuadBufferInfo=q,r.createXYQuadBuffers=Z,r.createXYQuadVertices=d,r.createCresentBufferInfo=Q,r.createCresentBuffers=$,r.createCresentVertices=A,r.createCylinderBufferInfo=J,r.createCylinderBuffers=ee,r.createCylinderVertices=_,r.createTorusBufferInfo=re,r.createTorusBuffers=te,r.createTorusVertices=T,r.createDiscBufferInfo=ne,r.createDiscBuffers=oe,r.createDiscVertices=x,r.deindexVertices=function(e){var r=e.indices,t={},n=r.length;return Object.keys(e).filter(i).forEach(function(o){for(var i=e[o],u=i.numComponents,f=a(u,n,i.constructor),s=0;s<n;++s)for(var c=r[s]*u,l=0;l<u;++l)f.push(i[c+l]);t[o]=f}),t},r.flattenNormals=function(e){if(e.indices)throw"can't flatten normals of indexed vertices. deindex them first";for(var r=e.normal,t=r.length,n=0;n<t;n+=9){var o=r[n+0],a=r[n+1],i=r[n+2],u=r[n+3],f=r[n+4],s=r[n+5],c=o+u+r[n+6],l=a+f+r[n+7],m=i+s+r[n+8],d=Math.sqrt(c*c+l*l+m*m);c/=d,l/=d,m/=d,r[n+0]=c,r[n+1]=l,r[n+2]=m,r[n+3]=c,r[n+4]=l,r[n+5]=m,r[n+6]=c,r[n+7]=l,r[n+8]=m}return e},r.makeRandomVertexColors=g,r.reorientDirections=s,r.reorientNormals=c,r.reorientPositions=l,r.reorientVertices=m,r.concatVertices=B,r.duplicateVertices=function(e){var r={};return Object.keys(e).forEach(function(t){var n=e[t],o=O(n),a=w(n,o.length);P(o,O(a),0),r[t]=a}),r}}])})}]);